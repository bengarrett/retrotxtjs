import{LegacyText,DOS437En,ISO88591,Win1252EN}from"./module/text.js";(()=>{let s="retrotxt-active",n="retrotxt-font-amiga",a="retrotxt-font-msdos",r="retrotxt-font-windows",i="textAmiga",o="textMSDOS",c="textWin9x",l="textWrap",d="textUnicode",m="retrotxtWrap",u="pre-wrap";let g=document.getElementById("retrotxt-canvas");if(null!==g&&0!==g.textContent.trim().length){var t=document.getElementsByTagName("head");if(0!==t.length){let e=g.textContent;var p=g.parentNode;var v=new class{constructor(t=""){this.set=t}css(){var t=document.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href","../css/retrotxt.css"),t}links(){var t=document.createElement("p");return t.setAttribute("id","retrotxt-links"),t}amiga(){var t=document.createElement("a");return t.setAttribute("id",i),t.textContent="Amiga",t.addEventListener("click",()=>{this._activeLink(i),this._activeInfo(i),this._amigaToggle()}),t}msdos(){var t=document.createElement("a");return t.setAttribute("id",o),t.textContent="MS-DOS",t.addEventListener("click",()=>{this._activeLink(o),this._activeInfo(o),this._msdosToggle()}),t}win9x(){var t=document.createElement("a");return t.setAttribute("id",c),t.textContent="Windows",t.addEventListener("click",()=>{this._activeLink(c),this._activeInfo(c),this._win9xToggle()}),t}wrap(){let t=document.createElement("a");return t.textContent="Wrapped",t.setAttribute("id",l),t.setAttribute("class",s),t.addEventListener("click",t=>{this._wrapToggle(t.target)}),t.addEventListener("mouseover",()=>{t.classList.contains(s)?g.style.whiteSpace="pre":g.style.whiteSpace=u}),t.addEventListener("mouseleave",()=>{t.classList.contains(s)?g.style.whiteSpace=u:g.style.whiteSpace="pre"}),t}unicode(){var t=document.createElement("a");return t.setAttribute("id",d),t.textContent="Unicode",t.addEventListener("click",()=>{this._activeLink(d),this._activeInfo(d),this._unicodeToggle()}),t}_activeInfo(t=""){for(var e=document.createElement("a"),n=document.getElementById("retrotxt-status");n.firstChild;)n.removeChild(n.firstChild);var s=(()=>{switch(t){case i:return"ISO-8895-1";case o:return"CP-437";case c:return"Windows-1252";case d:return"";default:throw new Error(`Unknown active info ID: "${t}"`)}})();switch(t){case d:return void n.append(" ");case i:e.setAttribute("href","https://github.com/rewtnull/amigafonts/"),e.append("Topaz font by dMG");break;case o:case c:e.setAttribute("href","https://int10h.org/oldschool-pc-fonts/"),e.append("VGA font by VileR");break;default:throw new Error(`Unknown active info ID: "${t}"`)}var a=document.createElement("a");a.setAttribute("href","https://github.com/bengarrett/retrotxtjs"),a.append("RetroTxt"),n.append(s," encoding; ",e,", code: ",a,".")}_activeLink(e=""){document.getElementById("retrotxt-links").childNodes.forEach(t=>{t.id!==l&&t.nodeType===Node.ELEMENT_NODE&&(t.classList.remove(s),t.id===e)&&t.classList.add(s)})}_amigaToggle(){g.classList.remove(a,r),g.classList.add(n);var t=new LegacyText(""+e,{codepage:ISO88591});g.textContent=t.normalize()}_msdosToggle(){g.classList.remove(n,r),g.classList.add(a);var t=new LegacyText(""+e,{codepage:DOS437En,displayControls:!0});g.textContent=t.normalize()}_wrapToggle(t){let e=t;if(null==t&&(e=document.getElementById(l)),t.classList.contains(s))return this._wrapOff(e,!0);this._wrapOn(e,!0)}_wrapOff(t,e){let n=t;null==t&&(n=document.getElementById(l)),g.style.whiteSpace="pre",n.classList.remove(s),e&&localStorage.setItem(m,"false")}_wrapOn(t,e){let n=t;null==t&&(n=document.getElementById(l)),g.style.whiteSpace=u,n.classList.add(s),e&&localStorage.removeItem(m)}_win9xToggle(){g.classList.remove(n,a),g.classList.add(r);var t=new LegacyText(""+e,{codepage:Win1252EN});g.textContent=t.normalize()}_unicodeToggle(){g.classList.remove(a,n,r),g.textContent=e}},t=(t[0].append(v.css()),v.links()),t=(t.append("View text as: ",v.unicode(),v.msdos(),v.amiga(),v.win9x(),v.wrap()),p.insertBefore(t,g),document.createElement("p"));t.setAttribute("id","retrotxt-status"),p.append(t),"false"===localStorage.getItem(m)&&v._wrapOff(null,!0),(g.classList.contains("retrotxt-msdos")?v.msdos():g.classList.contains("retrotxt-amiga")?v.amiga():g.classList.contains("retrotxt-windows")?v.win9x():v.unicode()).click()}}})();
/*! retrotxt v2.0.1 (2024-06-11); © Ben Garrett - LGPL-3.0 */
